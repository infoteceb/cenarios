<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gerar Cenários • Dashboard</title>

    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              'background-light': '#E8EAE3',
              'background-dark': '#1C251D',
              'surface-light': '#DADBCE',
              'surface-dark': '#2A362B',
              'border-light': '#BFC1B6',
              'border-dark': '#404F42',
              'primary': '#8D9B7A',
              'text-primary-light': '#2A362B',
              'text-primary-dark': '#E8EAE3',
              'text-secondary-light': '#526253',
              'text-secondary-dark': '#A9B4A0',
              'text-on-primary': '#FFFFFF'
            },
            fontFamily: {
              display: ['Roboto Mono', 'monospace']
            },
            borderRadius: { DEFAULT: '0.5rem' }
          }
        }
      };
    </script>

    <style>
      :root {
        --bg: #E8EAE3;
        --surface: #DADBCE;
        --border: #BFC1B6;
        --primary: #8D9B7A;
        --text: #2A362B;
      }

      body {
        font-family: 'Roboto Mono', monospace;
        background-color: var(--bg);
        color: var(--text);
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
      }
    </style>
  </head>

  <body class="font-display bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark">

    <!-- ===================================================================== -->
    <!-- HEADER PADRONIZADO (mesmo do INDEX)                                   -->
    <!-- ===================================================================== -->
    <header class="bg-surface-light dark:bg-surface-dark border-b border-border-light dark:border-border-dark">
      <div class="max-w-7xl mx-auto px-4 py-6 flex flex-col sm:flex-row items-center justify-between gap-4">

        <!-- LOGO + TEXTOS -->
        <div class="flex items-center gap-3 flex-shrink-0 w-full sm:w-auto">
          <div class="flex items-center justify-center w-10 h-10 rounded-md bg-primary text-white font-bold text-sm">
            SM
          </div>

          <div class="leading-tight">
            <h1 class="text-base font-bold whitespace-nowrap">MPTEX</h1>
            <p class="text-xs text-text-secondary-light whitespace-nowrap">
              Metodologia de Planejamento Tecnológico do Exército
            </p>
          </div>
        </div>

        <!-- BOTÃO VOLTAR -->
        <a href="index.html"
          class="h-10 w-full sm:w-auto px-4 text-sm font-semibold border border-border-light dark:border-border-dark rounded-md 
                 bg-white hover:bg-surface-light flex items-center justify-center gap-1 whitespace-nowrap">
          <span class="material-symbols-outlined text-base">arrow_back</span>
          Voltar
        </a>

      </div>
    </header>

    <!-- ===================================================================== -->
    <!-- MAIN ALINHADO COM O HEADER                                            -->
    <!-- ===================================================================== -->
    <main class="max-w-7xl mx-auto px-4 py-8">

      <section class="panel bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-lg p-6 mb-8">
        <div class="panel-header flex items-center justify-between mb-6">
          <h2 class="text-xl font-bold flex items-center gap-2">
            <span class="material-symbols-outlined text-xl">add_circle</span>
            Gerar Novos Cenários
          </h2>
        </div>

        <div class="panel-content">
          <form id="scenarioForm" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

              <div class="form-group">
                <label for="horizonte" class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">
                  Horizonte Temporal
                </label>

                <select id="horizonte" name="horizonte"
                  class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md
                         bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent"
                  required>
                  <option value="" disabled selected>Selecione o horizonte temporal</option>
                  <option value="2035">2035</option>
                  <option value="2040">2040</option>
                  <option value="2050">2050</option>
                </select>
              </div>

              <div class="form-group">
                <label for="email" class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">
                  E-mail para notificação
                </label>

                <input type="email" id="email" name="email"
                  class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md 
                         bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent"
                  placeholder="seu@email.com"
                  required>
              </div>

              <div class="form-group md:col-span-2">
                <label for="contexto"
                  class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">
                  Contexto Operacional
                </label>

                <textarea id="contexto" name="contexto" rows="4"
                  class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md 
                         bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent"
                  placeholder="Descreva o contexto operacional..."
                  required></textarea>
              </div>

            </div>

            <div class="flex justify-end pt-4 border-t border-border-light dark:border-border-dark mt-6">
              <button type="submit"
                class="bg-primary text-white px-6 py-2 rounded-md font-medium hover:bg-opacity-90 transition-colors 
                       flex items-center gap-2">
                <span class="material-symbols-outlined text-base">send</span>
                Gerar Cenários
              </button>
            </div>
          </form>
        </div>
      </section>

    </main>

    <script>
      document.getElementById('scenarioForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = {
          horizonte: document.getElementById('horizonte').value,
          contexto: document.getElementById('contexto').value,
          email: document.getElementById('email').value,
          timestamp: new Date().toISOString()
        };

        try {
          const response = await fetch('https://automacoes-n8n.4gtudk.easypanel.host/webhook/3d722561-1eb7-45d1-944f-0803069d6b12', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
          });

          if (response.ok) {
            alert('Solicitação enviada com sucesso!');
            document.getElementById('scenarioForm').reset();
          } else {
            throw new Error('Erro ao enviar solicitação');
          }

        } catch (error) {
          alert('Erro ao enviar. Tente novamente.');
        }
      });
    </script>

  </body>
</html>
