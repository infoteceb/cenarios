<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gerar Cenários • Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              'background-light': '#E8EAE3',
              'background-dark': '#1C251D',
              'surface-light': '#DADBCE',
              'surface-dark': '#2A362B',
              'border-light': '#BFC1B6',
              'border-dark': '#404F42',
              'primary': '#8D9B7A',
              'text-primary-light': '#2A362B',
              'text-primary-dark': '#E8EAE3',
              'text-secondary-light': '#526253',
              'text-secondary-dark': '#A9B4A0',
              'text-on-primary': '#FFFFFF'
            },
            fontFamily: {
              display: ['Roboto Mono', 'monospace']
            },
            borderRadius: { DEFAULT: '0.5rem' }
          }
        }
      };
    </script>
    <style>
      :root {
        --bg: #E8EAE3;
        --surface: #DADBCE;
        --border: #BFC1B6;
        --primary: #8D9B7A;
        --text: #2A362B;
      }
      body {
        font-family: 'Roboto Mono', monospace;
        background-color: var(--bg);
        color: var(--text);
      }
      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding:  0;
      }
      .form-input {
        width: 100%;
        padding: 0.75rem;
        margin: 0.5rem 0 1.25rem;
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 1rem;
        background: white;
        transition: border-color 0.3s, box-shadow 0.3s;
      }
      .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(141, 155, 122, 0.2);
      }
      .btn-primary {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 0.5rem;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .btn-primary:hover {
        background: #7a8a66;
      }
      .form-group {
        margin-bottom: 1.5rem;
      }
      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text);
      }
    </style>
  </head>
  <body class="font-display bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark">
    <header class="header" style="background-color: var(--surface); border-bottom: 1px solid var(--border); padding: 8px 0;">
      <div class="container">
        <div class="flex items-center justify-between gap-4 py-2">
          <div class="brand flex items-center gap-3">
            <div class="brand-mark bg-primary text-text-on-primary rounded-lg w-8 h-8 flex items-center justify-center font-bold text-sm">SM</div>
            <div class="brand-text">
              <h1 class="text-lg font-bold">Dashboard de Cenários</h1>
              <p class="text-xs text-text-secondary-light">MPTEx - Metodologia de Planejamento Tecnológico do Exército</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <a href="index.html" class="text-sm font-semibold border border-border-light rounded-md px-3 py-1.5 bg-white hover:bg-surface-light flex items-center gap-1">
              <span class="material-symbols-outlined" style="font-size: 16px;">arrow_back</span>
              Voltar
            </a>
          </div>
        </div>
      </div>
    </header>

    <main class="container py-8 px-4">
      <section class="panel bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-lg p-6 mb-8">
        <div class="panel-header flex items-center justify-between mb-6">
          <h2 class="text-xl font-bold flex items-center gap-2">
            <span class="material-symbols-outlined" style="font-size: 1.25rem;">add_circle</span>
            Gerar Novos Cenários
          </h2>
        </div>
        
        <div class="panel-content">
          <form id="scenarioForm" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="form-group">
                <label for="horizonte" class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">Horizonte Temporal</label>
                <select id="horizonte" name="horizonte" class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent" required>
                  <option value="" disabled selected>Selecione o horizonte temporal</option>
                  <option value="2035">2035</option>
                  <option value="2040">2040</option>
                  <option value="2050">2050</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="email" class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">E-mail para notificação</label>
                <input type="email" id="email" name="email" class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="seu@email.com" required>
              </div>
              
              <div class="form-group md:col-span-2">
                <label for="contexto" class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1">Contexto Operacional</label>
                <textarea id="contexto" name="contexto" rows="4" class="w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-md bg-white dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Descreva o contexto operacional..." required></textarea>
              </div>
            </div>
            
            <div class="flex justify-end pt-4 border-t border-border-light dark:border-border-dark mt-6">
              <button type="submit" class="bg-primary text-white px-6 py-2 rounded-md font-medium hover:bg-opacity-90 transition-colors flex items-center gap-2">
                <span class="material-symbols-outlined" style="font-size: 1.1rem;">send</span>
                Gerar Cenários
              </button>
            </div>
          </form>
        </div>
      </section>
    </main>

    <script>
      document.getElementById('scenarioForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = {
          horizonte: document.getElementById('horizonte').value,
          contexto: document.getElementById('contexto').value,
          email: document.getElementById('email').value,
          timestamp: new Date().toISOString()
        };

        try {
          const response = await fetch('https://automacoes-n8n.4gtudk.easypanel.host/webhook/3d722561-1eb7-45d1-944f-0803069d6b12', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
          });

          if (response.ok) {
            alert('Solicitação de geração de cenários enviada com sucesso!');
            document.getElementById('scenarioForm').reset();
          } else {
            throw new Error('Erro ao enviar a solicitação');
          }
        } catch (error) {
          console.error('Erro:', error);
          alert('Ocorreu um erro ao enviar a solicitação. Por favor, tente novamente.');
        }
      });
    </script>
  </body>
</html>
